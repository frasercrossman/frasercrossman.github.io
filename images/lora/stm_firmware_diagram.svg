<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->

<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   version="1.1"
   id="svg7560"
   xml:space="preserve"
   width="1122.5197"
   height="793.70074"
   viewBox="0 0 1122.5197 793.70074"
   sodipodi:docname="stm_firmware_diagram.svg"
   inkscape:version="0.92.1 r15371"><metadata
     id="metadata7566"><rdf:RDF><cc:Work
         rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><defs
     id="defs7564" /><sodipodi:namedview
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1"
     objecttolerance="10"
     gridtolerance="10"
     guidetolerance="10"
     inkscape:pageopacity="0"
     inkscape:pageshadow="2"
     inkscape:window-width="640"
     inkscape:window-height="480"
     id="namedview7562"
     showgrid="false"
     inkscape:zoom="0.29734129"
     inkscape:cx="561.25983"
     inkscape:cy="396.85037"
     inkscape:window-x="0"
     inkscape:window-y="0"
     inkscape:window-maximized="0"
     inkscape:current-layer="g7568" /><g
     id="g7568"
     inkscape:groupmode="layer"
     inkscape:label="stm_firmware_diagram"
     transform="matrix(1.3333333,0,0,-1.3333333,0,793.70077)"><g
       id="g7570"><g
         id="g7572"
         transform="matrix(1,0,0,-1,0,595.27557)"><path
           d="m 52.527,222.789 h 575.282 c 10.683,0 19.285,8.602 19.285,19.285 v 149.317 c 0,10.683 -8.602,19.285 -19.285,19.285 H 52.527 c -10.683,0 -19.285,-8.602 -19.285,-19.285 V 242.074 c 0,-10.683 8.602,-19.285 19.285,-19.285 z"
           style="fill:none;stroke:#000000;stroke-width:2.26771688;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:6.80315, 2.267717;stroke-dashoffset:0;stroke-opacity:1"
           id="path7574"
           inkscape:connector-curvature="0" /></g><g
         id="g7576"
         transform="matrix(1,0,0,-1,0,595.27557)"><path
           d="m 52.527,18.035 h 575.282 c 10.683,0 19.285,8.602 19.285,19.285 v 149.317 c 0,10.683 -8.602,19.285 -19.285,19.285 H 52.527 c -10.683,0 -19.285,-8.602 -19.285,-19.285 V 37.32 c 0,-10.683 8.602,-19.285 19.285,-19.285 z"
           style="fill:none;stroke:#000000;stroke-width:2.26771688;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:6.80315, 2.267717;stroke-dashoffset:0;stroke-opacity:1"
           id="path7578"
           inkscape:connector-curvature="0" /></g><g
         id="g7580"
         transform="matrix(1,0,0,-1,0,595.27557)"><path
           d="m 48.25,428.875 h 583.074 c 8.387,0 15.137,6.75 15.137,15.137 v 117.191 c 0,8.383 -6.75,15.137 -15.137,15.137 H 48.25 c -8.387,0 -15.137,-6.754 -15.137,-15.137 V 444.012 c 0,-8.387 6.75,-15.137 15.137,-15.137 z"
           style="fill:none;stroke:#000000;stroke-width:2.008183;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:6.02455, 2.008183;stroke-dashoffset:0;stroke-opacity:1"
           id="path7582"
           inkscape:connector-curvature="0" /></g><text
         transform="matrix(1,0,0,-1,54.715374,534.64285)"
         style="font-variant:normal;font-weight:normal;font-size:29.99999809px;font-family:'DejaVu Sans';-inkscape-font-specification:DejaVuSans;writing-mode:lr-tb;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="text7586"><tspan
           x="0 19.019999 37.469997 49.23 68.220001"
           y="0"
           sodipodi:role="line"
           id="tspan7584">Setup</tspan></text>
<text
         transform="matrix(1,0,0,-1,54.715374,326.27299)"
         style="font-variant:normal;font-weight:normal;font-size:29.99999809px;font-family:'DejaVu Sans';-inkscape-font-specification:DejaVuSans;writing-mode:lr-tb;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="text7592"><tspan
           x="0 19.019999 37.469997 56.459999 75.479996 84.989998 93.809998 112.14"
           y="0"
           sodipodi:role="line"
           id="tspan7588">Send Job</tspan><tspan
           x="0 16.709999 42.57 50.879997 71.82 81.329994 97.529999 115.85999 134.19"
           y="197.14284"
           sodipodi:role="line"
           id="tspan7590">LMiC Loop</tspan></text>
<text
         transform="matrix(1,0,0,-1,108.21429,503.57139)"
         style="font-variant:normal;font-weight:normal;font-size:22px;font-family:'DejaVu Sans';-inkscape-font-specification:DejaVuSans;writing-mode:lr-tb;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="text7616"><tspan
           x="0 13.992 20.966 27.940001 34.408001 48.334 54.428001 63.051998 69.146004 82.610001 88.704002 94.797997 106.238 119.768 126.742 140.69 153.692 162.31599 175.84599 184.536 198.46201 211.92599 218.02 224.994 231.46201 238.92"
           y="0"
           sodipodi:role="line"
           id="tspan7594">1. Initialise External I/O</tspan><tspan
           x="0 13.992 20.966 27.940001 34.408001 48.334 54.428001 63.051998 69.146004 82.610001 88.704002 94.797997 106.238 119.768 126.742 138.996 157.96001 164.054"
           y="27.5"
           sodipodi:role="line"
           id="tspan7596">2. Initialise LMiC</tspan><tspan
           x="0 13.992 20.966 27.940001 34.408001 48.334 54.428001 63.051998 69.146004 82.610001 88.704002 94.797997 106.238 119.768 126.742 140.69 154.22 168.21201 179.65199 193.09399 202.136"
           y="55"
           sodipodi:role="line"
           id="tspan7598">3. Initialise Sensors</tspan><tspan
           x="0 13.992 20.966 27.940001 42.262001 55.792 69.255997 83.204002 90.178001 102.498 115.962 128.03999 140.052 153.582 162.20599 169.17999 183.12801 196.658 210.606 224.532 238.062 252.054 264.13199 277.66199 284.63599 301.09201 314.16 321.134 328.108 335.85199 344.45401 357.896 379.32401 386.298 400.17999 414.12799 427.39401 442.66199 459.97601"
           y="82.5"
           sodipodi:role="line"
           id="tspan7600">4. Read Packet Sequence No. from EEPROM</tspan><tspan
           x="0.0012543499 13.993255 20.967255 27.941254 42.263256 55.793255 69.257256 83.205254 90.179253 104.12725 117.65726 131.58325 143.02325 156.46526 165.57326 172.54726 189.48726 202.95125 211.57526"
           y="210.17645"
           sodipodi:role="line"
           id="tspan7602">1. Read Sensor Data</tspan><tspan
           x="0.0012543499 13.993255 20.967255 27.941254 43.297253 56.739254 70.731255 82.171257 90.795258 99.837257 113.82925 125.90726 134.53125 141.50525 153.82526 167.28926 179.36725 191.40126 204.93126"
           y="237.67645"
           sodipodi:role="line"
           id="tspan7604">2. Construct Packet</tspan><tspan
           x="0.0012543499 13.993255 20.967255 27.941254 45.255253 59.181255 72.711258 86.703255 100.23325 107.20725 119.50526 132.96925 145.04726 157.08125 170.61125 179.23526 186.20926 193.95325 207.39525 216.43726 223.41125 233.64125 242.68326 256.14725 270.13925 281.57925 303.00726 309.10126 320.54126 331.98126 338.07526 351.51724"
           y="265.17645"
           sodipodi:role="line"
           id="tspan7606">3. Queue Packet for Transmission</tspan><tspan
           x="0.0012543499 13.993255 20.967255 27.941254 34.409256 48.335255 60.479256 69.081253 82.611252 104.03925 117.56925 131.49525 140.11925 147.09326 159.43526 172.89926 184.97725 196.98926 210.51926 219.14325 226.11725 240.06526 253.59526 267.54324 281.46927 294.99927 308.99124 321.06924 334.59924 341.57324 358.02927 371.11926 378.09326 385.06726 391.16125 405.08725 412.06125 425.94327 439.89127 453.15726 468.42526 485.73926"
           y="292.67645"
           sodipodi:role="line"
           id="tspan7608">4. Increment Packet Sequence No. in EEPROM</tspan><tspan
           x="0.0012543499 13.993255 20.967255 27.941254 43.297253 57.289253 70.819252 82.897255 95.635254 102.67525 110.41926 123.86125 132.90326 139.87726 154.17726 167.70726 189.13525 202.59926 208.69325 222.61925 228.71326 242.63925 256.58725 263.56125 270.02927 283.47125 297.41925"
           y="405.93616"
           sodipodi:role="line"
           id="tspan7610">1. Check for Remaining Jobs</tspan><tspan
           x="0.0012543499 13.993255 20.967255 27.941254 34.409256 42.153255 49.127254 55.595253 69.037254 82.985252 94.425255 101.39925 115.74326 129.27325 150.70125 164.16525 170.25925 184.18526 191.15926 198.13326 212.08125 224.40126 237.93126 250.00925 263.93524 272.55927 286.08926 293.12924 301.75327 315.67926 329.20926"
           y="433.43616"
           sodipodi:role="line"
           id="tspan7612">2. If Jobs Remain, Execute them</tspan><tspan
           x="0.0012543499 13.993255 20.967255 27.941254 40.481255 53.923256 71.897255 85.427254 94.469254 101.44325 118.38326 131.82526 149.79926 163.72525 170.69925 179.38925 193.31526 206.84526 213.81926 226.73326 235.33525 248.77725 260.85526 274.38525 285.82526 297.26526 310.70724"
           y="460.93616"
           sodipodi:role="line"
           id="tspan7614">3. Power Down the Processor</tspan></text>
<g
         id="g7618"
         transform="matrix(1,0,0,-1,0,595.27557)"><path
           d="m 661.07,273.848 c 22.145,-20.36 44.289,-40.715 43.93,-61.071 -0.355,-20.359 -23.215,-40.715 -46.07,-61.074"
           style="fill:none;stroke:#000000;stroke-width:1.70078695;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
           id="path7620"
           inkscape:connector-curvature="0" /></g><g
         id="g7622"
         transform="matrix(1,0.919355,0.919355,-1,0,595.27557)"><path
           d="m 234.344,477.781 5.007,-5.01 -17.53,5.009 17.53,5.007 z"
           style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.335536;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
           id="path7624"
           inkscape:connector-curvature="0" /></g><g
         id="g7626"
         transform="matrix(1,0,0,-1,0,595.27557)"><path
           d="m 661.07,486.574 c 22.145,-20.359 44.289,-40.715 43.93,-61.07 -0.355,-20.356 -23.215,-40.715 -46.07,-61.074"
           style="fill:none;stroke:#000000;stroke-width:1.70078695;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
           id="path7628"
           inkscape:connector-curvature="0" /></g><g
         id="g7630"
         transform="matrix(1,0.919354,0.919354,-1,0,595.27557)"><path
           d="m 128.356,593.067 5.007,-5.01 -17.53,5.009 17.53,5.011 z"
           style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.335536;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
           id="path7632"
           inkscape:connector-curvature="0" /></g><g
         id="g7634"
         transform="matrix(1,0,0,-1,0,595.27557)"><path
           d="m 661.023,65.195 c 77.168,83.914 154.973,168.516 155.665,245.957 0.695,77.446 -75.411,148.082 -151.512,218.715"
           style="fill:none;stroke:#000000;stroke-width:1.70078695;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
           id="path7636"
           inkscape:connector-curvature="0" /></g><g
         id="g7638"
         transform="matrix(0.919655,-1,-1,-0.919655,0,595.27557)"><path
           d="m 377.196,-325.645 5.008,-5.008 -17.527,5.007 17.527,5.009 z"
           style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.33533597;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
           id="path7640"
           inkscape:connector-curvature="0" /></g><text
         transform="matrix(1,0,0,-1,738.23172,294.00009)"
         style="font-variant:normal;font-weight:normal;font-size:22px;font-family:'DejaVu Sans';-inkscape-font-specification:DejaVuSans;writing-mode:lr-tb;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none"
         id="text7646"><tspan
           x="0 13.948 20.042 33.571999 47.102001"
           y="0"
           sodipodi:role="line"
           id="tspan7642">Sleep</tspan><tspan
           x="2.2128921 10.792892 24.784891 38.776894 50.216892"
           y="27.5"
           sodipodi:role="line"
           id="tspan7644">(50s)</tspan></text>
</g></g></svg>